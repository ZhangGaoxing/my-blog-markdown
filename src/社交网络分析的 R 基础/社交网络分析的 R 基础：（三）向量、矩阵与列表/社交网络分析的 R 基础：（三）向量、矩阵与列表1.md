<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

在第二章介绍了 R 语言中的基本数据类型，本章会将其组装起来，构成特殊的数据结构，即向量、矩阵与列表。这些数据结构在社交网络分析中极其重要，本质上对图的分析，就是对邻接矩阵的分析，而矩阵又是由若干个向量构成，因此需要熟练掌握这些特殊的数据结构。

* [向量]()
  * [向量的创建]()
  * [向量元素的访问]()
  * [向量的运算]()
  * [向量的其他常用操作]()

## 向量

### 向量的创建

向量（vector）作为 R 语言中最简单的数据结构，由一串有序的基本数据类型变量构成。
```R
x <- c(1, 2, 3, 4, 5)
```
上面一行代码就是创建一个包含 5 个元素的向量 `x`，而 `c()` 就是创建向量的函数。多个向量也可以使用 `c()` 进行拼接：
```R
x <- c(1, 2, 3, 4, 5)
y <- c(6, 7, 8, 9, 10)
z <- c(x, y)
```
代码中的向量 `z` 包含 10 个元素，即向量 `x` 和向量 `y` 的拼接。

向量的创建也可以通过面向对象的方式实现：
```R
x <- vector(mode = "integer", length = 5)
```
参数 `mode` 为向量中存储的数据类型，对应 R 语言中基本的数据类型，如整型 `integer`，浮点型 `numeric`, 字符串型 `character`，逻辑型 `logical` 等等；`length` 为初始向量的长度。向量作为一种无限长度的数据结构，此处的 `length` 是指向量初始化时的长度，后续仍然可以使用 `c()` 添加元素。
```R
x <- c(x, 0)  # 向 x 中添加元素 0
```

### 向量元素的访问

向量中的元素通过“`[索引]`”的形式访问。_**需要注意的是 R 语言中的索引不代表偏移量，而代表第几个，即索引从 1 开始。**_
```R
> x <- c(1, 2, 3, 4, 5)
> x[2]
[1] 2
```
想要从向量中取出多个元素需要在方括号内传递索引的向量，即“`[c(索引)]`”。
```R
> x[2: 4]  # 取出第 1 到 4 项
[1] 2 3 4
> x[c(1, 3, 5)]  # 取出第 1,3,5 项
[1] 1 3 5
> x[c(-1, -5)]  # 去掉第 1,5 项
[1] 2 3 4
```

R 语言中还存在一种特殊的索引——名称索引。
```R
> x <- c(1, 2, 3, 4, 5)
> names(x) <- c("one", "two", "three", "four", "five")  # 对名称索引进行赋值
> x["three"]  # 使用名称索引访问元素
three
3
> names(x)  # 查看名称索引
[1] "one"   "two"   "three" "four"  "five"
```
名称索引相比数值索引的好处就是容易记忆，在后面对图中节点属性进行分析时，通常使用节点的名称去访问图中的节点，而不是使用节点的索引。

### 向量的运算

向量可以直接进行算数运算，运算时向量的每一个元素都进行同样算术运算。比如：
```R
> x <- c(1, 2, 3, 4, 5)
> y <- c(5, 4, 3, 2, 1)
> x + y
[1] 6 6 6 6 6
```

基本的算术运算包括：`+`、`-`、`*`、`/`、乘方`^`。还包括常用的数学函数：`log()`、`sin()`、`sqrt()`等等。还有一些特殊的统计函数：最大值 `max()`、最小值 `min()`、求和 `sum()`、平均值 `mean()`等等。
```R
> x <- c(1, 2, 3, 4, 5)
> max(x)
[1] 5
> mean(x)
[1] 3
```

向量的逻辑运算包括两种情况，一种是对向量中的每一个元素，一种是对向量整体：
| 运算符 | 描述 |
| :-: | :- |
| & | 元素逻辑与运算符，将第一个向量的每个元素与第二个向量的相对应元素进行与运算 |
| \| | 元素逻辑或运算符，将第一个向量的每个元素与第二个向量的相对应元素进行或运算 |
| && | 逻辑与运算符，只对两个向量的第一个元素进行与运算 |
| \|\| | 逻辑或运算符，只对两个向量的第一个元素进行或运算 |

```R
> x <- c(T, T, F, F, F)
> y <- c(T, T, F, T, T)
> x & y
[1]  TRUE  TRUE FALSE FALSE FALSE
> x | y
[1]  TRUE  TRUE FALSE  TRUE  TRUE
> x && y
[1] TRUE
> x || y
[1] TRUE
```

### 向量的其他常用操作

获取向量的长度 `length()`：
```R
> length(c(1, 2, 3, 4, 5))
[1] 5
```

查找特定元素在向量中的索引 `which()`：
```R
> x <- c(1, 2, 3, 4, 5)
> which(x == 2)
[1] 2
```

使用 `%in%` 判断元素是否在向量中存在：
```R
> 2 %in% c(1, 2, 3, 4, 5)
[1] TRUE
```

对向量中的元素进行排序 `order()`，需要注意的是 `order()` 返回的排序结果是向量值的索引：
```R
> x <- c(10, 20, 30, 40, 50)
> order(x, decreasing = TRUE)
[1] 5 4 3 2 1
```

统计特定元素在向量中出现的次数 `table()`：
```R
> x <- c(T, T, F, F, F)
> table(x)
x
FALSE  TRUE
    3     2
```

## 参考

1. <a id="1" target="_blank" href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html">An Introduction to R</a>
2. <a id="2" target="_blank" href="https://www.runoob.com/r/r-data-types.html">R 数据类型 | 菜鸟教程</a>